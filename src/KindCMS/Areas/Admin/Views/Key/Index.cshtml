@using KindCMS.Areas.Admin.ViewModels.Key
@model IEnumerable<KeyListViewModel>
@{
    var q = Context.Request.Query["q"];
    var key = Context.Request.Query["key"];


}
<div class="btn-toolbar">
    <div class="btn-group">

        <a class="btn btn-default  " asp-route-key="@key">显示全部</a>
        @if (string.IsNullOrEmpty(key))
        {
            <a class="btn btn-default disabled">上一级</a>
        }
        else
        {
            <a class="btn btn-default" asp-route-key="">上一级</a>
        }


    </div>
    <div class="btn-group">
        <a class="btn btn-primary" asp-action="Create" asp-route-parent="@key">添加</a>
    </div>
    <div class="btn-group pull-right">
        <form class="form-inline">
            <label class="control-label">搜索</label>
            <input type="search" name="q" class="form-control" value="@q" />
            <input type="submit" class="btn btn-primary pull-right" value="提交" />
        </form>
    </div>

</div>
<div>
    <span class="h3">
        "@ViewBag.ParentKey"
    </span>
</div>
<p></p>
<div class="row container-fluid">
    @foreach (var cls in Model)
    {
        <div class="col-md-3 col-sm-4 table-bordered">
            <h3 class="text-primary"><span class="text-muted">键:</span>@cls.CLS.Key</h3>
            <p>名称:<span class="text-success">@cls.CLS.Name</span></p>
            <p>父级:@cls.CLS.Parent</p>
            <p>排序:@cls.CLS.Order</p>
            <p>子集:<span class="text-danger">@cls.xCount</span></p>
            <p class="btn-toolbar">
                <a asp-route-key="@cls.CLS.Key" class="btn btn-info">进入</a>
                <a class="btn btn-warning" asp-action="Edit" asp-route-key="@cls.CLS.Key">修改</a>
                <a class="btn btn-danger" asp-action="Delete" asp-route-key="@cls.CLS.Key" onclick="if (!confirm('你确定要删除该项')) { return false; }" >删除</a>
            </p>

        </div>
    }
</div>